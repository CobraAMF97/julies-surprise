<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Shell - Coquillage Volant</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Georgia', serif;
            background-color: #000;
        }

        #gameCanvas {
            background: url('photorealistic-beach-at-sunset-1242075606326313030.jpeg') no-repeat center center;
            background-size: cover;
            display: block;
            margin: 0 auto;
        }

        .score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 24px;
            z-index: 10;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<div class="score">Score: <span id="score">0</span></div>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Dimension du jeu, ajustée pour le mobile
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Chargement des images
    const shellImg = new Image();
    shellImg.src = 'https://img.icons8.com/plasticine/100/000000/spiral-shell.png'; // Image du coquillage

    const obstacleImg = new Image();
    obstacleImg.src = 'https://img.icons8.com/plasticine/100/000000/coral.png'; // Image du corail (obstacle)

    shellImg.onload = () => {
        gameLoop();
    };

    let shell = {
        x: 50,
        y: 150,
        width: 50,
        height: 50,
        gravity: 1.5,
        lift: -20,
        velocity: 0
    };

    let obstacles = [];
    let frame = 0;
    let score = 0;
    let gameOver = false;

    function drawShell() {
        ctx.drawImage(shellImg, shell.x, shell.y, shell.width, shell.height);
    }

    function drawObstacles() {
        obstacles.forEach(obstacle => {
            ctx.drawImage(obstacleImg, obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            obstacle.x -= 5;

            // Collision
            if (shell.x < obstacle.x + obstacle.width &&
                shell.x + shell.width > obstacle.x &&
                shell.y < obstacle.y + obstacle.height &&
                shell.height + shell.y > obstacle.y) {
                gameOver = true;
            }

            // Score
            if (obstacle.x + obstacle.width < 0) {
                obstacles.shift();
                score++;
                document.getElementById("score").innerText = score;
            }
        });
    }

    function updateShell() {
        shell.velocity += shell.gravity;
        shell.y += shell.velocity;

        if (shell.y + shell.height > canvas.height || shell.y < 0) {
            gameOver = true;
        }
    }

    function createObstacle() {
        let gapHeight = 200; // Hauteur de l'écart entre les obstacles
        let topHeight = Math.floor(Math.random() * (canvas.height - gapHeight));
        let bottomHeight = canvas.height - (topHeight + gapHeight);

        // Créer le corail supérieur
        obstacles.push({
            x: canvas.width,
            y: 0,
            width: 50,
            height: topHeight
        });

        // Créer le corail inférieur
        obstacles.push({
            x: canvas.width,
            y: canvas.height - bottomHeight,
            width: 50,
            height: bottomHeight
        });
    }

    function resetGame() {
        shell.y = 150;
        shell.velocity = 0;
        obstacles = [];
        score = 0;
        frame = 0;
        gameOver = false;
        gameLoop(); // Redémarre la boucle de jeu
    }

    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (gameOver) {
            ctx.font = "48px Georgia";
            ctx.fillStyle = "white";
            ctx.fillText("Game Over", canvas.width / 2 - 120, canvas.height / 2);
            ctx.fillText("Cliquez pour recommencer", canvas.width / 2 - 220, canvas.height / 2 + 50);
            canvas.addEventListener("click", resetGame, { once: true });
            return;
        }

        drawShell();
        drawObstacles();
        updateShell();

        frame++;
        if (frame % 120 === 0) {
            createObstacle();
        }

        requestAnimationFrame(gameLoop);
    }

    canvas.addEventListener("click", () => {
        shell.velocity = shell.lift;
    });
</script>

</body>
</html>

